# CYBERXEED自動ログイン拡張機能

この拡張機能は、CYBERXEEDシステムに自動的にログインするためのMicrosoft Edge/Google Chrome拡張機能です。ブックマークからCYBERXEEDのURLを開いた際に、設定したログイン情報を使用して自動的にログインします。

## 機能

* CYBERXEEDシステムへの自動ログイン
* ユーザーごとにカスタマイズ可能なログイン情報設定
* **ログイン情報の暗号化保存**（セキュリティ強化）
* Chrome/Edge両ブラウザ対応
* **ポップアップ内蔵の設定画面**（v1.5.3新機能）
* **CYBERXEED URLのカスタマイズ**（v1.5.3新機能）

## 技術的特徴

* 入力イベント処理の最適化によるクロスブラウザ互換性
* Chrome Storageを使用したログイン情報の**暗号化保存**
* モジュール化された設計による保守性の向上
* ブラウザ固有の識別子を利用した暗号化キー生成
* **ポップアップ統合型設定UI**（v1.5.3新機能）
* **カスタムURL対応**（異なるCYBERXEEDサーバーに対応）

## プロジェクト構成

```
cyberxeed-autologin/
├── manifest.json      # 拡張機能のマニフェストファイル
├── background.js      # バックグラウンドスクリプト
├── content.js         # コンテンツスクリプト（自動ログイン機能）
├── encryption.js      # 暗号化・復号化ユーティリティ
├── popup.html         # ポップアップUI（設定画面統合型）
├── popup_integrated.js # ポップアップの機能実装（設定機能含む）
├── security_utils.js  # セキュリティユーティリティ
└── images/            # アイコン画像
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

詳細なインストール手順は [INSTALLATION.md](INSTALLATION.md) を参照してください。

## 必要な権限

* `storage`: ログイン情報を保存するために使用
* `tabs`: 現在のタブ情報を取得するために使用
* `host_permissions`: CYBERXEEDのドメインにアクセスするために使用

## 動作の仕組み

1. ユーザーがCYBERXEEDのURLにアクセスすると、content.jsが実行されます
2. Chrome Storageから暗号化されたログイン情報を取得します
3. 暗号化キーを使用してログイン情報を復号化します
4. ログインフォームに情報を入力し、適切な入力イベントを発火させます
5. ログインボタンをクリックして自動ログインを完了します

## 入力イベント処理

多くのウェブアプリケーションは、実際のユーザー入力を検出するために様々なイベントリスナーを使用しています。この拡張機能では、以下の入力イベントを順番に発火させることで、ブラウザが実際のユーザー入力と同様に認識するようにしています：

1. フォーカスイベント(focus)
2. 入力イベント(input)
3. 変更イベント(change)
4. キーボードイベント(keydown, keyup)
5. ブラーイベント(blur)

これにより、Chrome、Edge両ブラウザでの互換性を確保しています。

## 暗号化機能

この拡張機能では、ユーザーのログイン情報を保護するために以下の暗号化機能を実装しています：

1. **暗号化キーの生成**: ブラウザの一意識別子とランダム値を組み合わせて暗号化キーを生成
2. **XOR暗号化**: 生成したキーを使用してログイン情報をXOR暗号化
3. **Base64エンコード**: 暗号化されたデータをBase64形式でエンコードして保存
4. **復号化処理**: 保存された暗号化データを読み込む際に復号化

この実装により、ブラウザのストレージに保存されるログイン情報が保護され、他のアプリケーションやユーザーからのアクセスを防止します。

## 新機能: ポップアップ統合型設定UI (v1.5.3)

バージョン1.5.3では、設定画面をポップアップ内に統合しました：

1. 拡張機能アイコンをクリックしてポップアップを開く
2. 「設定画面を表示」ボタンをクリック
3. 同じポップアップ内で設定画面が表示される
4. 設定を入力して「設定を保存」ボタンをクリック
5. 「戻る」ボタンでメイン画面に戻る

この改善により、Edge拡張機能の制限に影響されず、より安定した設定機能を提供します。

## 新機能: CYBERXEED URLのカスタマイズ (v1.5.3)

バージョン1.5.3では、異なるCYBERXEEDサーバーに対応するため、URLをカスタマイズする機能を追加しました：

1. 設定画面の「詳細設定」タブを開く
2. 「CYBERXEED URL」欄に使用するサーバーのURLを入力
3. 「設定を保存」ボタンをクリック

この機能により、デフォルト以外のCYBERXEEDサーバーを使用している企業でも拡張機能を利用できるようになりました。

## セキュリティ対策

* ログイン情報は暗号化されてChrome Storageに保存され、拡張機能のみがアクセス可能です
* 暗号化キーはブラウザ固有の情報から生成され、デバイスごとに異なります
* 最小限の権限のみを要求し、必要なドメインのみにアクセスします

## 貢献方法

1. このリポジトリをフォークします
2. 機能追加やバグ修正のためのブランチを作成します
3. 変更をコミットします
4. プルリクエストを作成します

## ライセンス

MITライセンスの下で公開されています。詳細は [LICENSE](LICENSE) ファイルを参照してください。

---

[冬の民]

* この拡張機能の開発にあたり、Manusの支援を受けました。
